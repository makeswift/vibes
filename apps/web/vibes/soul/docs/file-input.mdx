---
title: File Input
preview: file-input-example
previewSize: sm
---

## Usage

{/* prettier-ignore-start */}

<CodeBlock lang="ts">{`
import { FileInput } from '@/vibes/soul/form/file-input';

function Usage() {
    return (
      <FileInput />
    );
}
`}
</CodeBlock>

{/* prettier-ignore-end */}

## State Management

The `FileInput` component uses an internal Zustand store to manage file state.

### Store Hooks

| Hook                    | Return Type                  | Description                               |
| ----------------------- | ---------------------------- | ----------------------------------------- |
| `useFiles()`            | `File[]`                     | Returns array of currently selected files |
| `useFileState(file)`    | `FileItemState \| undefined` | Returns state for a specific file         |
| `useDragOver()`         | `boolean`                    | Returns current drag over state           |
| `useInvalid()`          | `boolean`                    | Returns current invalid state             |
| `useFileInputActions()` | `FileInputActions`           | Returns all store actions                 |

### Store Actions

| Action                        | Type                                     | Description                             |
| ----------------------------- | ---------------------------------------- | --------------------------------------- |
| `addFiles(files)`             | `(files: File[]) => void`                | Add new files to the store              |
| `setFiles(files)`             | `(files: File[]) => void`                | Replace all files in the store          |
| `setProgress(file, progress)` | `(file: File, progress: number) => void` | Update upload progress for a file       |
| `setSuccess(file)`            | `(file: File) => void`                   | Mark file upload as successful          |
| `setError(file, error)`       | `(file: File, error: string) => void`    | Mark file upload as failed              |
| `removeFile(file)`            | `(file: File) => void`                   | Remove file from the store              |
| `setDragOver(dragOver)`       | `(dragOver: boolean) => void`            | Update drag over state                  |
| `setInvalid(invalid)`         | `(invalid: boolean) => void`             | Update invalid state                    |
| `setHasAnimated(file)`        | `(file: File) => void`                   | Mark file as having completed animation |
| `clear()`                     | `() => void`                             | Clear all files and reset state         |

## API Reference

### FileInputProps

| Prop             | Type                                                                                                            | Default                         |
| ---------------- | --------------------------------------------------------------------------------------------------------------- | ------------------------------- |
| `id`             | `string`                                                                                                        |                                 |
| `className`      | `string`                                                                                                        |                                 |
| `onUpload`       | `(files: File[], options: UploadOptions) => Promise<void> \| void` <Tooltip content="See UploadOptions below"/> |                                 |
| `onFileAccept`   | `(file: File) => void`                                                                                          |                                 |
| `onFileReject`   | `(file: File, message: string) => void`                                                                         |                                 |
| `onFileValidate` | `(file: File) => string \| null \| undefined`                                                                   |                                 |
| `hideLabel`      | `boolean`                                                                                                       | `false`                         |
| `message`        | `string`                                                                                                        |                                 |
| `cta`            | `string`                                                                                                        | `'Upload file'`                 |
| `hint`           | `string`                                                                                                        | `'or drag and drop files here'` |
| `invalid`        | `boolean`                                                                                                       |                                 |
| `label`          | `string`                                                                                                        | `'File upload'`                 |
| `maxFiles`       | `number`                                                                                                        |                                 |
| `maxSize`        | `number`                                                                                                        |                                 |
| `uploadingLabel` | `string`                                                                                                        | `'Uploading'`                   |
| `successLabel`   | `string`                                                                                                        | `'Upload complete'`             |
| `errorLabel`     | `string`                                                                                                        | `'Error'`                       |

### UploadOptions

| Prop         | Type                                     | Default |
| ------------ | ---------------------------------------- | ------- |
| `onProgress` | `(file: File, progress: number) => void` |         |
| `onSuccess`  | `(file: File) => void`                   |         |
| `onError`    | `(file: File, error: Error) => void`     |         |

### FileState

| Prop          | Type                                            | Default |
| ------------- | ----------------------------------------------- | ------- |
| `file`        | `File`                                          |         |
| `progress`    | `number`                                        |         |
| `status`      | `'idle' \| 'uploading' \| 'success' \| 'error'` |         |
| `error`       | `string`                                        |         |
| `hasAnimated` | `boolean`                                       |         |

### FileDropzoneProps

| Prop             | Type                      | Default |
| ---------------- | ------------------------- | ------- |
| `children`       | `ReactNode`               |         |
| `onFilesAdded`   | `(files: File[]) => void` |         |
| `onTriggerClick` | `() => void`              |         |
| `disabled`       | `boolean`                 |         |
| `invalid`        | `boolean`                 |         |

### FileItemProps

| Prop             | Type                   | Default             |
| ---------------- | ---------------------- | ------------------- |
| `file`           | `File`                 |                     |
| `onRemoveFile`   | `(file: File) => void` |                     |
| `uploadingLabel` | `string`               | `'Uploading'`       |
| `successLabel`   | `string`               | `'Upload complete'` |
| `errorLabel`     | `string`               | `'Error'`           |

### CSS Variables

This component supports various CSS variables for theming. Here's a comprehensive list.

<CodeBlock lang="css">{`
:root {
    --file-input-focus: var(--primary);
    --file-input-message: var(--contrast-500);
    --file-input-message-font-family: var(--font-family-body);
    --file-input-dropzone-background: var(--background);
    --file-input-dropzone-border: var(--contrast-200);
    --file-input-dropzone-background-hover: var(--contrast-100);
    --file-input-dropzone-border-hover: var(--foreground);
    --file-input-dropzone-border-disabled: color-mix(in oklab, var(--contrast-200) 70%, transparent);
    --file-input-dropzone-background-disabled: var(--background);
    --file-input-dropzone-border-error: var(--error);
    --file-input-dropzone-border-dragging: var(--foreground);
    --file-input-dropzone-background-dragging: var(--success-highlight);
    --file-input-trigger-icon: var(--foreground);
    --file-input-dropzone-message-font-family: var(--font-family-body);
    --file-input-dropzone-message: var(--contrast-500);
    --file-input-dropzone-message-disabled: color-mix(in oklab, var(--contrast-500) 70%, transparent);
    --file-input-item-border: var(--contrast-200);
    --file-input-item-border-error: var(--error);
    --file-input-item-name-font-family: var(--font-family-body);
    --file-input-item-name: var(--foreground);
    --file-input-item-status: var(--contrast-500);
    --file-input-item-status-error: var(--error);
    --file-input-item-delete-icon: var(--foreground);
    --file-input-item-progress: var(--primary);
    --file-input-mime-icon: var(--contrast-400);
}
`}</CodeBlock>

## Changelog

### 2025-08-20

- Migrated to internal Zustand store for state management
- Added `hasAnimated` property to `FileItemState` for improved animations
- Updated `FileDropzoneProps`: removed `inputRef`, added `onFilesAdded` and `onTriggerClick` callbacks
- Updated `FileItemProps`: removed `fileState` prop (now retrieved from store internally)
